Pg range { 1, 1, 5, list1 }
printList list1

!

@range ... Nil => start, Nil => step, Nil => end, Nil => resAddr
    Pg listEmpty { 'resAddr }
    L { 'start ('step) 'end - 1 => i } rangeLoop
        Pg listAdd { 'i, 'resAddr }
    @rangeLoop ...
    Ret

@listEmpty ... Nil => targetAddr
    0 => 'targetAddr
    Ret

@listAdd ... Nil => val, Nil => listAddr
    h = 'listAddr
    P { 'h == 0 } listAddEmpty | listAddNonEmpty

    @listAddEmpty ...
        curAddr = h;
        listAddCommon

    @listAddNonEmpty ...
        L { 'h, 'Nil, P { ''j /= 0 } => j } listAddLoop
        @listAddLoop ...
        curAddr = 'j;
        listAddCommon

    @listAddCommon ...
        nextNode = alloc 2;
        nextNode => curAddr
        'val => nextNode + 1
    Ret